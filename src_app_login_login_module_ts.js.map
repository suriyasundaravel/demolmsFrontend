{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts","./src/app/login/login.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { DataService } from '../services/data.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  userId:any;\n  private logresData: Observable<any>;\n  public resConfig:any=[];\n  leavemngtUrl:any;\n  private loginRes:Observable<any>;\n  private loginResData=[];\n   private otpRes: Observable <any>;\n  private otpResData = [];\nuser_phone:any;\nuser_otp;\nuser_mail:any;\norg_id:any;\npublic authData:any;\n\nconstructor(public router:Router,public dataService:DataService,private http:HttpClient) {\n    this.leavemngtUrl= this.dataService.base_path;\n}\npublic rec:any= []\n  ngOnInit() {\n    this.logresData = this.http.get(this.leavemngtUrl+\"/lres/lresources?orgcode=mag001&lang=en\");\n    this.logresData.subscribe(data=>{\n      this.resConfig=data;\n      // this.leavemngtUrl.confData = data;\n      this.dataService.confData= data;\n      // console.log(\"Login Response Data\"+ JSON.stringify(this.resConfig));  \n    },\n    error => {\n      console.error('Error response:', error.error);\n    });\n\n  }\n  \n  header = {\n    headers: new HttpHeaders(\n      {'Content-type':'application/json'}\n    )      \n  }\n\n  genOTP() {\n    let loginotpauthData = {\n      \"phone\": this.user_phone,\n      \"otpsrc\": \"LOG\",\n      \"orgId\": this.org_id,\n      \"email\": this.user_mail\n    };\n  \n    this.otpRes = this.http.post(this.leavemngtUrl + '/login/genotp', JSON.stringify(loginotpauthData), this.header);\n    this.otpRes.subscribe(\n      (data: any) => {\n        this.otpResData = data;\n        console.log(\"otp Res >> \", JSON.stringify(this.otpResData));\n  \n        if (this.otpResData && this.otpResData['status'] === \"Success\") {\n          // Fill the OTP value in the input field\n          this.user_otp = this.otpResData['otp_gen'];\n        } else {\n          console.log(\"Failed to fetch OTP\");\n        }\n      },\n      (error) => {\n        console.error(\"Error fetching OTP\", error);\n      }\n    );\n  }\n  \n\n\nauthenticate(){\nlet loginresauthData={\n  \"phone\":this.user_phone,\n    \"otpsrc\":\"LOG\",\n    \"otp\":this.user_otp,\n    \"orgId\":this.org_id,\n    \"email\":this.user_mail\n}\nthis.loginRes=this.http.post(this.leavemngtUrl+'/auth/gouser',JSON.stringify(loginresauthData),this.header);\n    this.loginRes.subscribe(data=>{\n      this.loginResData=data;\n      console.log(\"login res data\",JSON.stringify(this.loginResData));\n      // Accessing user_info array\n      const user_info = this.loginResData[\"userinfo\"].user_info;\n      // console.log('User Info:', user_info);\n      this.dataService.profileData = this.loginResData['userinfo'].user_info;\n      console.log(\"profile data\", this.dataService.profileData);\n      // Accessing name (DIS_NAME) from profile data\n      // if (this.dataService.profileData && this.dataService.profileData[0] && this.dataService.profileData[0]['DIS_NAME']) {\n      //   const name = this.dataService.profileData[0]['DIS_NAME'];\n      //   console.log(\"Name:\", name);\n      // } else {\n      //   console.error(\"DIS_NAME is not present in profile data or profile data is undefined/null.\");\n      // }\n\n      this.dataService.Uid=this.loginResData['userinfo'].userId;\n      this.dataService.Oid=this.loginResData['userinfo'].orgId;\n      this.dataService.companyName = this.loginResData['userinfo'].org_name;\n      // console.log(\"company name\",this.dataService.Uid);\n      // console.log(\"company name\",this.dataService.Oid);\n      // console.log(\"company name\",this.dataService.companyName);\n      \n    \n      // console.log(\"status: \" + this.loginResData['status']);\n      let resStatus = this.loginResData['status'];\n       if (!resStatus.undefined && \"Success\"==resStatus){\n         this.dataService.authHeader = this.loginResData['accessToken'];\n         console.log(\"header >> \" + this.dataService.authHeader);\n         this.dataService.setToken();\n      \n         this.dataService.isSupervisor= this.loginResData[\"userinfo\"].isSupervisor;\n         console.log(\"supervisor status\", this.dataService.isSupervisor);\n         if(!this.dataService.isSupervisor){\n          this.router.navigateByUrl('emp-dashboard');\n         }\n        else{\n        \n        this.router.navigateByUrl('sup-dashboard');\n        }\n      //   // Clear input fields\n      this.user_phone = '';\n      this.user_otp = '';\n      this.user_mail = '';\n      this.org_id = '';\n       }\n       else{\n        console.log(\"message : \" + resStatus);\n\n       }\n      \n      \n    })\n \n  }\n \n}\n","export default \"\\r\\n<ion-content padding class=\\\"login\\\">\\r\\n  \\r\\n\\r\\n    <div style=\\\"margin-top: 0px;\\\">\\r\\n      <h1 class=\\\"head\\\">{{resConfig[\\\"login_title\\\"]}}</h1>\\r\\n      <h4 class=\\\"sign\\\" routerLink=\\\"/form\\\">{{resConfig[\\\"login_sing\\\"]}}</h4>\\r\\n      <h6 class=\\\"new\\\" routerLink=\\\"/form\\\">{{resConfig[\\\"login_new\\\"]}}</h6>\\r\\n      <h6 class=\\\"or\\\">{{resConfig[\\\"login_or\\\"]}}</h6>\\r\\n      <h4 class=\\\"sign\\\">{{resConfig[\\\"login_reg\\\"]}}</h4>\\r\\n      <div class=\\\"center\\\">\\r\\n        <form style=\\\"margin-top: 30px;\\\">\\r\\n          <ion-item class=\\\"phone\\\">\\r\\n            <ion-input [(ngModel)]=\\\"org_id\\\" #s3=\\\"ngModel\\\"\\r\\n             placeholder=\\\"{{resConfig.login_orgid}}\\\" \\r\\n            class=\\\"no\\\" \\r\\n            name=\\\"first3\\\" required></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item class=\\\"phone\\\">\\r\\n            <ion-input #s1=\\\"ngModel\\\" type=\\\"number\\\" [(ngModel)]=\\\"user_phone\\\"\\r\\n             placeholder=\\\"{{resConfig.login_phone}}\\\" class=\\\"no\\\" \\r\\n             name=\\\"first1\\\" pattern=\\\"[0-9]{10}\\\" required></ion-input>\\r\\n          </ion-item>\\r\\n          <div class=\\\"otp\\\">\\r\\n            <ion-button color=\\\"tertiary\\\" (click)=\\\"genOTP()\\\">Send OTP</ion-button>\\r\\n          </div>\\r\\n          <ion-item class=\\\"phone\\\">\\r\\n            <ion-input #s2=\\\"ngModel\\\" class=\\\"no\\\" type=\\\"number\\\" [(ngModel)]=\\\"user_otp\\\"\\r\\n             placeholder=\\\"{{resConfig.login_otp}}\\\" name=\\\"first2\\\" required></ion-input>\\r\\n          </ion-item>\\r\\n          <!-- <h6 class=\\\"or\\\">(Or)</h6> -->\\r\\n          <ion-item class=\\\"phone\\\" hidden=\\\"true\\\">\\r\\n            <ion-input [(ngModel)]=\\\"user_mail\\\" #s=\\\"ngModel\\\"\\r\\n            size=\\\"10\\\" type=\\\"email\\\" placeholder=\\\"{{resConfig.login_email}}\\\" class=\\\"no\\\"\\r\\n            name=\\\"first\\\" required></ion-input>\\r\\n          </ion-item>\\r\\n      \\r\\n        </form>\\r\\n      </div>\\r\\n        <br>\\r\\n      <div class=\\\"clear\\\">\\r\\n        <ion-button [disabled]=\\\" (s1.invalid || s2.invalid || s3.invalid)&& s.invalid \\\" \\r\\n        class=\\\"go\\\" color=\\\"tertiary\\\" (click)=\\\"authenticate()\\\">{{resConfig[\\\"login_go\\\"]}}</ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n      <br><br>\\r\\n      <div style=\\\"text-align: center;\\\">\\r\\n        <ion-text style=\\\"text-align: center; font-size: 14px;  font-weight: 600;\\\"> \\r\\n          {{resConfig[\\\"login_com_name\\\"]}}</ion-text>\\r\\n      </div>  \\r\\n  \\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}