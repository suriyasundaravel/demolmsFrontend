{"version":3,"file":"src_app_leave-history_leave-history_module_ts.js","mappings":"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","sources":["./src/app/leave-history/leave-history-routing.module.ts","./src/app/leave-history/leave-history.module.ts","./src/app/leave-history/leave-history.page.ts","./src/app/leave-history/leave-history.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LeaveHistoryPage } from './leave-history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LeaveHistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LeaveHistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LeaveHistoryPageRoutingModule } from './leave-history-routing.module';\n\nimport { LeaveHistoryPage } from './leave-history.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LeaveHistoryPageRoutingModule\n  ],\n  declarations: [LeaveHistoryPage]\n})\nexport class LeaveHistoryPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ModalController, ToastController } from '@ionic/angular';\nimport { RestService } from '../rest.service';\nimport { HttpClient } from '@angular/common/http';\nimport { DataService } from '../services/data.service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-leave-history',\n  templateUrl: './leave-history.page.html',\n  styleUrls: ['./leave-history.page.scss'],\n})\nexport class LeaveHistoryPage implements OnInit {\n  \n\n  supervisorStatus:boolean;\n  leavemngtUrl: any;\n  imageSrc: SafeUrl;\n\n  showAllDates: boolean = false;\n  filteredData:any=[];\n  private getHistoryRes: Observable<any>;\n  public getHistoryResData: any = [];\n\n  public userId: any;\n  public orgId: any;\n  public resConfig: any = [];\n  historyCount:any;\n  \n\n  constructor(private router: Router, private modalctrl: ModalController, private rs: RestService,\n    private http: HttpClient, public dataService: DataService,private toastController: ToastController,private sanitizer: DomSanitizer) {\n    this.leavemngtUrl = this.dataService.base_path;\n    this.supervisorStatus = this.dataService.isSupervisor\n  }\n  loadImage() {\n    this.dataService.getImage(this.dataService.logopath, this.dataService.Oid).subscribe(\n      (imageBlob: Blob) => {\n        const imageUrl = URL.createObjectURL(imageBlob);\n        // console.log(\"image url\",imageUrl);\n        \n        this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(imageUrl);\n        // console.log(\"image src\",this.imageSrc);\n        \n      },\n      (error) => {\n        console.error('Failed to load image', error);\n      }\n    );\n  }\n  // loadImage() {\n  //   const locallyStoredImage = localStorage.getItem('logoImage');\n  //   if (locallyStoredImage) {\n  //     // If the image is already stored locally, use it directly\n  //     this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(locallyStoredImage);\n  //   } else {\n  //     // If the image is not available locally, fetch it from the server and store it locally\n  //     this.dataService.getImage().subscribe(\n  //       (imageBlob: Blob) => {\n  //         const reader = new FileReader();\n  //         reader.onloadend = () => {\n  //           const base64data = reader.result as string;\n  //           this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(base64data);\n  //           // Store the image locally\n  //           this.storeImageLocally(base64data);\n  //         };\n  //         reader.readAsDataURL(imageBlob);\n  //       },\n  //       (error) => {\n  //         console.error('Failed to load image', error);\n  //       }\n  //     );\n  //   }\n  // }\n// Function to store the image in localStorage\n// storeImageLocally(base64data: string) {\n//   localStorage.setItem('logoImage', base64data);\n// }\n\n  ngOnInit() {\n    this.resConfig = this.dataService.confData;\n    this.userId = this.dataService.Uid;\n    this.orgId = this.dataService.Oid;\n    this.loadImage();\n    this.getLeaveHistory();\n  }\n  getLeaveHistory() {\n    const DashgetleaveHistory = {\n      \"userId\": this.userId,\n      \"orgId\": this.orgId\n    };\n\n    this.http.post(this.leavemngtUrl + '/leave/getlhistory', JSON.stringify(DashgetleaveHistory), this.dataService.jsonauthToken)\n      .subscribe((response: any) => {\n        this.getHistoryResData = response.data;\n        this.historyCount = this.getHistoryResData.length;\n        console.log(\"employee dash get leave history\", JSON.stringify(this.getHistoryResData));\n        this.filterDates();\n      });\n  }\n\n  filterDates() {\n    const currentDate = new Date();\n    this.filteredData = this.getHistoryResData.filter(item => {\n      const fromDate = new Date(item.fromdt);\n    \n      return fromDate >= currentDate || fromDate.toDateString() === currentDate.toDateString();\n    });\n  }\n\n  toggleShowDates() {\n    this.showAllDates = !this.showAllDates;\n  }\n\n \n\n  loadLeaveHis(leaveId: number[]) {\n    const id = leaveId[0]; // Extract the leave ID from the array\n  console.log(\"leave id\", id);\n  this.router.navigate(['/leave-details', id]);\n  }\n\n}\n\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\r\\n          <ion-avatar>\\r\\n            <img [src]=\\\"imageSrc\\\" class=\\\"logo-image\\\" alt=\\\"Logo\\\">\\r\\n          </ion-avatar>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n\\r\\n      <ion-menu-button slot=\\\"end\\\" class=\\\"menu\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content class=\\\"leave-history\\\">\\r\\n  <ion-card >\\r\\n    <ion-card-header>\\r\\n      <ion-card-title>Leave History</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content class=\\\"ion-text-center\\\">\\r\\n      <div style=\\\"margin-bottom: 10px;\\\">\\r\\n        <ion-row>\\r\\n          <h3 class=\\\"count\\\">Total Count:   {{historyCount}}</h3>\\r\\n        </ion-row>\\r\\n      </div>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"4\\\">\\r\\n          <ion-label class=\\\"header\\\">{{resConfig[\\\"emp_from\\\"]}}</ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\">\\r\\n          <ion-label class=\\\"header\\\">To Date</ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\">\\r\\n          <ion-label class=\\\"header\\\">Status</ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <div *ngIf=\\\"filteredData.length > 0 || filteredData.length === 0\\\">\\r\\n      \\r\\n          <ion-row *ngFor=\\\"let item of showAllDates ? getHistoryResData : filteredData\\\">\\r\\n            <ion-col size=\\\"4\\\">\\r\\n              <ion-label (click)=\\\"loadLeaveHis([item.leaveId])\\\">{{item.fromdt}}</ion-label>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"4\\\">\\r\\n              <ion-label>{{item.todt}}</ion-label>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"4\\\">\\r\\n              <ion-label>{{item.status}}</ion-label>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n          <!-- <div class=\\\"header\\\" *ngIf=\\\"filteredData.length === 0\\\">\\r\\n            No Leave History Found.\\r\\n          </div> -->\\r\\n  \\r\\n  \\r\\n        <button class=\\\"header\\\" type=\\\"button\\\" (click)=\\\"toggleShowDates()\\\">\\r\\n          {{ showAllDates ? 'Show less' : 'Show more' }}\\r\\n        </button>\\r\\n      </div>\\r\\n\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n</ion-content>\\r\\n<ion-tab-bar class=\\\"tab\\\" slot=\\\"bottom\\\">\\r\\n    <ion-tab-button tab=\\\"Order History\\\" routerLink=\\\"/apply-leave\\\">\\r\\n      <ion-icon name=\\\"add-circle-outline\\\"></ion-icon>\\r\\n      <ion-label>Apply Leave</ion-label>\\r\\n    </ion-tab-button>\\r\\n    <ion-tab-button tab=\\\"View Brouchure\\\" routerLink=\\\"/planned-leave\\\">\\r\\n      <ion-icon name=\\\"browsers\\\"></ion-icon>\\r\\n      <ion-label>My Plan</ion-label>\\r\\n    </ion-tab-button>\\r\\n    <ion-tab-button tab=\\\"View Brouchure\\\" routerLink=\\\"/permission-apply\\\">\\r\\n      <ion-icon name=\\\"logo-pinterest\\\"></ion-icon>\\r\\n      <ion-label>Permission</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n\\r\\n</ion-tab-bar>\\r\\n\\r\\n\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}