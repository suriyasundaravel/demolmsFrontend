{"version":3,"file":"src_app_sup-leavedetails_sup-leavedetails_module_ts.js","mappings":"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","sources":["./src/app/sup-leavedetails/sup-leavedetails-routing.module.ts","./src/app/sup-leavedetails/sup-leavedetails.module.ts","./src/app/sup-leavedetails/sup-leavedetails.page.ts","./src/app/sup-leavedetails/sup-leavedetails.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SupLeavedetailsPage } from './sup-leavedetails.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SupLeavedetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SupLeavedetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SupLeavedetailsPageRoutingModule } from './sup-leavedetails-routing.module';\n\nimport { SupLeavedetailsPage } from './sup-leavedetails.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SupLeavedetailsPageRoutingModule\n  ],\n  declarations: [SupLeavedetailsPage]\n})\nexport class SupLeavedetailsPageModule {}\n","import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { DataService } from '../services/data.service';\nimport { ToastController } from '@ionic/angular';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-sup-leavedetails',\n  templateUrl: './sup-leavedetails.page.html',\n  styleUrls: ['./sup-leavedetails.page.scss'],\n})\nexport class SupLeavedetailsPage implements OnInit {\n\n  isCancelEnabled: boolean = false;\n\n  supervisorStatus:boolean;\n  leavemngtUrl: any;\n\n  public userId: any;\n  public orgId: any;\n  public resConfig: any = [];\n\n  leaveId: number;\n  leaveDetails: any;\n\n  cancelres:any;\n  cancelresData:any=[];\n\n  getindividualdata:Observable<any>;\n  getindividualdataRes:any=[];\n  imageSrc: SafeUrl;\n\n  constructor(private activatedRoute: ActivatedRoute,private router: Router,\n    private http: HttpClient, public dataService: DataService,private toastController: ToastController,private sanitizer: DomSanitizer ) {\n    this.leavemngtUrl = this.dataService.base_path;\n    this.supervisorStatus = this.dataService.isSupervisor\n   }\n   loadImage() {\n    this.dataService.getImage(this.dataService.logopath, this.dataService.Oid).subscribe(\n      (imageBlob: Blob) => {\n        const imageUrl = URL.createObjectURL(imageBlob);\n        // console.log(\"image url\",imageUrl);\n        \n        this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(imageUrl);\n        // console.log(\"image src\",this.imageSrc);\n        \n      },\n      (error) => {\n        console.error('Failed to load image', error);\n      }\n    );\n  }\n  //  loadImage() {\n  //   const locallyStoredImage = localStorage.getItem('logoImage');\n  //   if (locallyStoredImage) {\n  //     // If the image is already stored locally, use it directly\n  //     this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(locallyStoredImage);\n  //   } else {\n  //     // If the image is not available locally, fetch it from the server and store it locally\n  //     this.dataService.getImage().subscribe(\n  //       (imageBlob: Blob) => {\n  //         const reader = new FileReader();\n  //         reader.onloadend = () => {\n  //           const base64data = reader.result as string;\n  //           this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(base64data);\n  //           // Store the image locally\n  //           this.storeImageLocally(base64data);\n  //         };\n  //         reader.readAsDataURL(imageBlob);\n  //       },\n  //       (error) => {\n  //         console.error('Failed to load image', error);\n  //       }\n  //     );\n  //   }\n  // }\n// Function to store the image in localStorage\n// storeImageLocally(base64data: string) {\n//   localStorage.setItem('logoImage', base64data);\n// }\n\n\n  ngOnInit() {\n    this.resConfig = this.dataService.confData;\n    this.userId = this.dataService.Uid;\n    this.orgId = this.dataService.Oid;\n    this.loadImage();\n    this.activatedRoute.paramMap.subscribe(params => {\n      this.leaveId = +params.get('leaveId');\n      // Call a function to fetch leave details using the leaveId\n      this.getLeaveDetails();\n    });\n  }\n\n  getLeaveDetails() {\n    let leaveid = {\n      \"leaveId\": this.leaveId\n    };\n  \n    this.getindividualdata=this.http.post(this.leavemngtUrl + '/leave/getlinfo', leaveid, this.dataService.jsonauthToken);\n      this.getindividualdata.subscribe(\n        (res: any) => {\n          this.getindividualdataRes = res.data;\n          console.log(\"individual leave\", this.getindividualdataRes);\n          // Compare \"from\" date with current date\n         const leaveFromdt = new Date(this.getindividualdataRes[0].fromdt);\n         const currentDate = new Date();\n         let currentStatus = this.getindividualdataRes[0].status;\n\n         this.isCancelEnabled = leaveFromdt > currentDate;\n         if (\"REJ\"==currentStatus || \"R\"==currentStatus) {\n          this.isCancelEnabled = false;\n         }\n        },\n        (error) => {\n          console.error(\"Error retrieving individual leave\", error);\n        }\n      );\n  }\n\n  async cancelLeave() {\n    \n    let cancelId = {\n      \"leaveId\": this.leaveId\n    };\n    console.log(\"leave id\", this.leaveId);\n  \n    this.cancelres =await this.http.post(this.leavemngtUrl + '/leave/leave_cancel', cancelId, {\n      ...this.dataService.jsonauthToken,\n      responseType: 'text' //  the response type is text\n    });\n  \n    this.cancelres.subscribe(\n      async (res: any) => {\n        this.cancelresData = res;\n        console.log(\"cancel response\", this.cancelresData);\n  \n        const toastc = await this.toastController.create({\n          message: this.cancelresData, // Use the response directly without parsing as JSON\n          position: 'middle',\n          buttons: [\n            {\n              text: 'OK',\n              role: 'cancel',\n              handler: () => {\n                   // Emit the leaveBalanceUpdated event\n              this.dataService.leaveBalanceUpdated.emit();\n                // Handle button click if needed\n                this.router.navigate(['/emp-dashboard'])\n                console.log('OK clicked');\n              }\n            }\n          ]\n        }).then(toast => {\n          toast.present();\n        });\n      },\n      (error: any) => {\n        console.log(\"Error:\", error);\n      }\n    );\n  }\n}\n","export default \"\\n<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\n          <ion-avatar>\\n            <img [src]=\\\"imageSrc\\\" class=\\\"logo-image\\\" alt=\\\"Logo\\\">\\n          </ion-avatar>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <div *ngIf=\\\"supervisorStatus\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n          <ion-icon routerLink=\\\"/leave-application\\\" style=\\\"margin-left: 15px;\\\" slot=\\\"start\\\" name=\\\"notifications\\\"></ion-icon>\\n          <ion-badge routerLink=\\\"/leave-application\\\" slot=\\\"start\\\" color=\\\"danger\\\" \\n          style=\\\"position: absolute;margin-bottom:30px;border-radius: 10px;margin-left: 15px;\\\">{{this.dataService.getpacount}}\\n          </ion-badge>\\n          <ion-button routerLink=\\\"/search\\\" slot=\\\"start\\\">\\n            <ion-icon slot=\\\"start\\\" name=\\\"search\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n        \\n      </div>\\n      <ion-menu-button slot=\\\"end\\\" class=\\\"menu\\\"></ion-menu-button>\\n    </ion-buttons>\\n </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title>Leave Information</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-list>\\n        <ng-container *ngFor=\\\"let item of getindividualdataRes\\\">\\n          <ion-item>\\n            <ion-label>Dates</ion-label>\\n            <ion-note slot=\\\"end\\\">{{ item.fromdt }} / {{ item.todt }}</ion-note>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label>Leave Type</ion-label>\\n            <ion-note slot=\\\"end\\\">{{ item.leavetypeDesc }}</ion-note>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label>Reason</ion-label>\\n            <ion-note slot=\\\"end\\\">{{ item.reason }}</ion-note>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label>Status</ion-label>\\n            <ion-note slot=\\\"end\\\">{{ item.statusDesc }}</ion-note>\\n          </ion-item>\\n\\n          <ion-item>\\n            <ion-label class=\\\"comment-text\\\">Approver Comments</ion-label>\\n            <ion-note slot=\\\"end\\\" class=\\\"comment-text\\\">{{ item.app_comments }}</ion-note>\\n          </ion-item>\\n        </ng-container>\\n      </ion-list>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <div class=\\\"ion-padding\\\">\\n    <ion-button expand=\\\"full\\\" color=\\\"tertiary\\\" (click)=\\\"cancelLeave()\\\" [disabled]=\\\"!isCancelEnabled\\\">Cancel Leave</ion-button>\\n  </div>\\n</ion-content>\\n<ion-tab-bar class=\\\"tab\\\" slot=\\\"bottom\\\">\\n    <ion-tab-button tab=\\\"Order History\\\" routerLink=\\\"/supervisor\\\">\\n      <ion-icon name=\\\"add-circle-outline\\\"></ion-icon>\\n      <ion-label>Apply Leave</ion-label>\\n    </ion-tab-button>\\n    <ion-tab-button tab=\\\"View Brouchure\\\" routerLink=\\\"/sup-dashboard\\\">\\n      <ion-icon name=\\\"person\\\"></ion-icon>\\n      <ion-label>Sup-Dash</ion-label>\\n    </ion-tab-button>\\n    <ion-tab-button tab=\\\"login\\\" routerLink=\\\"/leave-application\\\">\\n      <ion-icon name=\\\"create-outline\\\"></ion-icon>\\n      <ion-label>Pending Approvals</ion-label>\\n    </ion-tab-button>\\n</ion-tab-bar>\\n\\n\\n\";"],"names":[],"sourceRoot":"webpack:///"}